<div class="subscription px-2 py-3 my-3 d-flex justify-content-between align-items-center" data-controller="modal">
  <div class="column"><%= image_tag(asset_path(subscription.product.logo_url), class:"img #{subscription.product.company == 'SFR' ? 'rounded-circle' : ''}") %></div>
  <div class="column d-lg-flex align-items-center justify-content-center d-none category"><%= image_tag(asset_path("users/subscriptions/#{subscription.product.category.name}.png"), class: "picto mr-2") %> <span><%= t("users.subscription.#{subscription.product.category.sku}") %></span></div>
    <div class="column">
      <span class="status <%= subscription.state %>"><i class="<%= subscription.icon_state %>"></i> <%= t("users.subscription.#{subscription.state}") %></span><br>
      <span class=" date"><%= subscription.product.created_at.strftime('%d/%m/%Y') %></span>
  </div>
  <span class="price column"><strong><%= subscription.product.format_price %><br> </strong>/<%= t("users.subscription.months") %></span>
  <div class="actions column">
    <% if subscription.state == 'draft' %>
      <% if subscription.product.is_mobile? %>
        <%= link_to t('user.subscription.cta.resume'), new_subscription_billing_path(subscription), class: 'action' %>
      <% else %>
        <%= link_to t('user.subscription.cta.resume'), edit_subscription_address_path(subscription, subscription.address), class: 'action' %>
      <% end %>
    <% elsif subscription.state == 'succeeded' || subscription.state == 'activated' %>
      <%= link_to t('users.subscription.cta.details'), modal_subscription_path(subscription), class: "action", data: {target: '#exampleModal',
        action: 'click->modal#loadSubscriptionModal', href: modal_subscription_path(subscription), toggle: 'modal'}, id: 'modal-link' %>
    <% else %>
      <%= link_to t('users.subscription.cta.pay'), subscription_payment_path(subscription), class: "action", data: { turbolinks: false } %>
    <% end %>
    <hr>
    <% if subscription.state == 'draft' %>
      <%= link_to t('users.subscription.cta.abort'), abort_subscription_path(subscription), method: :post, data: {confirm: t('users.subscription.popup')}, class: "cancel" %>
    <% else %>
      <span class="cancel"><%= t('users.subscription.cta.cancel') %></span>
    <% end %>
  </div>
</div>
