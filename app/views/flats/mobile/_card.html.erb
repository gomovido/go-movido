<% config = flat[:details]['configs'].last %>
<%= link_to flat_path(location, type, flat[:code]) do  %>
  <div class="flat-card-large mb-4 col-12">
    <div data-controller="carousel" class="swiper-container position-relative" data-carousel-options-value='{"pagination": {"el": ".swiper-pagination"}}'>
      <div class="swiper-wrapper position-relative">
        <% flat[:images].first(3).each do |image| %>
          <div class="swiper-slide img-box" style="background-image:url(<%= image['url'] %>);"></div>
        <% end %>
      </div>
      <div class="swiper-pagination"></div>
      <div class="facilities-icons position-absolute">
        <% flat[:facilities].each do |facility| %>
          <%= get_icon(facility) %>
        <% end %>
      </div>
    </div>
    <div class="facilities my-2 d-flex align-items-center justify-content-between px-2">
      <% config['facilities'].first(3).sort_by{|h| get_name(h['name'])}.each do |facility| %>
        <div class="facility"><%= get_icon(facility['kind'].downcase) %> <span><%= get_name(facility['name'])  %></span> </div>
      <% end %>
    </div>
    <div class="details-wrapper d-flex justify-content-between px-2">
      <div class="details d-flex flex-column justify-content-around">
        <span class="name mb-2 text-left">
          <%= flat[:details]['name'] %>
        </span>
        <span class="pricing text-left">
          <%= flat[:details]['disp_price'] %> /<%= flat[:details]['billing'].downcase %>
        </span>
      </div>
      <%= link_to 'Book', booking_link(flat[:details]['city_name'], flat[:code]), class:'btn-flat-card', target:'blank' %>
    </div>
  </div>
<% end %>
