<div class="row">
  <div class="col-md-6 offset-md-3">
    <div class="billing-form d-flex flex-column mb-4 p-4">
      <%= simple_form_for [@category, @product, @subscription], data: {controller: "subscription"}, html: {id: 'billing-form', class:"d-flex flex-column"} do |f| %>
        <%= f.simple_fields_for :billing do |s| %>
          <%= s.hidden_field :user_id, value: current_user.id %>
          <div data-target="subscription.firstPart">
            <div class="input-wrapper mb-2">
              <label for="iban" class="mb-3 mr-2">IBAN</label>
              <i class="fas fa-info-circle" data-toggle="tooltip" data-placement="top" title="We need your bank account detail for your direct debit option."></i>
              <div class="input text-right d-flex justify-content-end pr-3">
                  <i class="fas fa-lock"></i>
                  <%= s.input :iban, label: 'IBAN', required: true, label: false, input_html: {data: { target: 'subscription.ibanInput' , action: 'change->subscription#fillBank'}, class:'form-control pl-5'} %>
              </div>
            </div>
            <div class="input-wrapper mb-2">
              <label for="bic" class="mb-3">BIC</label>
              <div class="input text-right d-flex justify-content-end pr-3" >
                  <%= s.input :bic, class:'form-control', required: true, label: false %>
              </div>
            </div>
            <div class="input-wrapper mb-2">
              <label for="bank" class="mb-3">Banking Institution</label>
              <div class="input text-right d-flex justify-content-end pr-3" >
                  <%= s.input :bank, required: true, label: false, readonly: true, hint: 'You cannot change this field', class:'form-control', input_html: {data: {target: 'subscription.bankInput' }} %>
              </div>
            </div>
            <hr>
            <div class="input-wrapper mb-3">
              <label for="address" class="mb-3">Billing address</label>
              <div class="input text-right d-flex justify-content-end pr-3">
                <%= s.input :address, required: true, label: false, input_html: {class:'form-control', data: {target: 'subscription.billingAddressInput'}} %>
              </div>
            </div>
          <% end %>
          <div class="input-wrapper mb-3">
            <label for="delivery_address" class="mb-3">Delivery address</label>
            <div class="input text-right d-flex justify-content-end pr-3">
              <%= f.input :delivery_address, required: true, label: false, hint: 'Billing and delivery addresses need to be the same', readonly: true, input_html: { class: 'form-control', data: {target: 'subscription.deliveryAddressInput'}} %>
            </div>
          </div>
           <div class="actions d-flex justify-content-around">
            <%= link_to 'Back', url_for(:back), class: 'btn btn-minor' %>
            <% if @product.sim_needed %>
              <span class="btn-main" data-action="click->subscription#stepForward">Confirm</span>
            <% else %>
              <%= f.button :submit, 'Confirm', class: 'btn-main'%>
            <% end %>
          </div>
        </div>
        <% if @product.sim_needed %>
          <%= render 'sim_form', f: f %>
        <% end %>
      <% end %>
    </div>
  </div>
</div>
