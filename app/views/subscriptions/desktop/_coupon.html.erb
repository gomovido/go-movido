<label><%= t('activerecord.attributes.product.coupon') %></label>
<%= simple_form_for subscription, data: {reflex: "submit->SubscriptionReflex#submit", signed_id: subscription.to_sgid.to_s }, html: {class: 'd-flex'} do |f| %>
  <% if response && response[:error].present? %>
    <div class="coupon-input-wrapper mr-3">
    <%= f.input :coupon, label: false, input_html: {class: "is-invalid"} %>
      <div class="invalid-feedback"><%= t("stripe.errors.#{response[:error]}" ) %></div>
    </div>
  <% elsif subscription.coupon %>
    <div class="coupon-input-wrapper mr-3">
      <%= f.input :coupon, label: false, disabled: true, input_html: {value: subscription.coupon.name} %>
      <div class="valid-feedback d-block"> <i><strong><%= subscription.coupon.name %></strong></i> coupon applied !</div>
    </div>
  <% else %>
    <div class="coupon-input-wrapper mr-3">
      <%= f.input :coupon, label: false %>
    </div>
  <% end %>
  <%= f.submit t("subscriptions.summary.coupon_cta"), class: "no-button purple #{subscription.coupon ? 'disabled' : ''}" %>
<% end %>

